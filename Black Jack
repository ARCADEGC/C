#include <stdio.h>
#include <stdlib.h>
#include <time.h>
#include <math.h>
#include <string.h>

int opponent(){
    int r = (rand() % 8) + 15;
    return r;
}

int value(){
    int r = (rand() % 13) + 1;
    
    switch(r){
        case 1: return r = 65;
        case 10: return r = 88;
        case 11: return r = 74;
        case 12: return r = 81;
        case 13: return r = 75;
        }
    return r;
}

int color(){
    int r = (rand() % 4) + 1;
     
    switch(r){
        case 1: return r = 83;
        case 2: return r = 72;
        case 3: return r = 67;
        }
    return r = 68;
}

int c_back_to_n(int x){
    switch(x){
        case 83: return x = 1;
        case 72: return x = 2;
        case 67: return x = 3;
        case 68: return x = 4;
        default: return x;
    }
}

int f_back_to_n(int y){
    switch(y){
        case 65: return y = 1;
        case 88: return y = 10;
        case 74: return y = 11;
        case 81: return y = 12;
        case 75: return y = 13;
        default: return y;
    }
}

int main() {
    char ans = '\0';
    char A = '\0';
    int w = 1;
    char con = '\0';
    printf("\n\n\t\t\t || Welcome to Black Jack ||\n\n");
    int deck[4][13];
    for(int four = 0; four < 4; four++){
        for(int thirteen = 0; thirteen < 13; thirteen++){
            deck[four][thirteen] = 0;
        }
    }
    srand(time(NULL));
    
        printf("Would you like to play? (y/n)\t");
        scanf("%c", &ans);
        
        if(ans == 'y' || ans == 'Y'){
            printf("\n\n\n");
            do{
                
                printf("Your hand:\n");
                for(int i = 0; i <= 1; i++){
                    int C = color();
                    int F = value();
                
                    if(deck[c_back_to_n(C)][f_back_to_n(F)]==0){
                        if(F == 65 ||F == 88 || F == 74 || F == 81 || F == 75){
                            printf("\n[%c of %c]", F, C);
                            deck[c_back_to_n(C)][f_back_to_n(F)] = 1;
                        }
                        else{
                            printf("\n[%i of %c]", F, C);
                            deck[c_back_to_n(C)][f_back_to_n(F)] = 1;
                        }
                    }
                    else{
                        i--;
                    }
                }
                printf("\n\nWould you like to draw another card? (y/n)\t");
                
                scanf("%c", &con);
                if(con == 'y' || con == 'Y'){
                    int C = color();
                    int F = value();
                
                    if(deck[c_back_to_n(C)][f_back_to_n(F)]==0){
                        if(F == 65 ||F == 88 || F == 74 || F == 81 || F == 75){
                            printf("\n[%c of %c]", F, C);
                            deck[c_back_to_n(C)][f_back_to_n(F)] = 1;
                        }
                        else{
                            printf("\n[%i of %c]", F, C);
                            deck[c_back_to_n(C)][f_back_to_n(F)] = 1;
                        }
                    }
                }
                
                printf("\n\n\t\t\t || Your opponent has %i ||\n", opponent());
                
                printf("\n\nAnother game? (y/n)\t");
                scanf("%c", &A);
                if(A == 'y' || A == 'Y'){
                    w = 1;
                    printf("\n________________________________________________________________________\n\n");
                }
                else{
                    return 0;
                }
            }while(w == 1);
        }
    return 0;
}
